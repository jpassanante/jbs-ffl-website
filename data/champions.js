// JBS FFL Championship History Data
// John Burroughs School Fantasy Football League - Since 1999

export const championships = [
  {
    year: 1999,
    champion: "Ted",
    runnerUp: null,
    thirdPlace: null,
    regularSeasonChamp: null,
    otherDivisionChamp: null,
    regularSeasonMostPoints: null,
  },
  {
    year: 2000,
    champion: "Ted",
    runnerUp: null,
    thirdPlace: null,
    regularSeasonChamp: null,
    otherDivisionChamp: null,
    regularSeasonMostPoints: null,
  },
  {
    year: 2001,
    champion: "Ted",
    runnerUp: null,
    thirdPlace: null,
    regularSeasonChamp: null,
    otherDivisionChamp: null,
    regularSeasonMostPoints: null,
  },
  {
    year: 2002,
    champion: "Ty",
    runnerUp: null,
    thirdPlace: null,
    regularSeasonChamp: null,
    otherDivisionChamp: null,
    regularSeasonMostPoints: null,
  },
  {
    year: 2003,
    champion: "Ty",
    runnerUp: null,
    thirdPlace: null,
    regularSeasonChamp: null,
    otherDivisionChamp: null,
    regularSeasonMostPoints: null,
  },
  {
    year: 2004,
    champion: "Ted",
    runnerUp: null,
    thirdPlace: null,
    regularSeasonChamp: null,
    otherDivisionChamp: null,
    regularSeasonMostPoints: null,
  },
  {
    year: 2005,
    champion: "John",
    runnerUp: null,
    thirdPlace: null,
    regularSeasonChamp: null,
    otherDivisionChamp: null,
    regularSeasonMostPoints: null,
  },
  {
    year: 2006,
    champion: "Joey",
    runnerUp: null,
    thirdPlace: null,
    regularSeasonChamp: null,
    otherDivisionChamp: null,
    regularSeasonMostPoints: null,
  },
  {
    year: 2007,
    champion: "Ben",
    runnerUp: null,
    thirdPlace: null,
    regularSeasonChamp: null,
    otherDivisionChamp: null,
    regularSeasonMostPoints: null,
  },
  {
    year: 2008,
    champion: "Tyler",
    runnerUp: null,
    thirdPlace: null,
    regularSeasonChamp: null,
    otherDivisionChamp: null,
    regularSeasonMostPoints: null,
  },
  {
    year: 2009,
    champion: "Lanny",
    runnerUp: "John",
    thirdPlace: "Matt",
    regularSeasonChamp: "Matt",
    otherDivisionChamp: "Peter",
    regularSeasonMostPoints: "Lanny",
  },
  {
    year: 2010,
    champion: "Joey",
    runnerUp: "Matt",
    thirdPlace: "John",
    regularSeasonChamp: "Joey",
    otherDivisionChamp: "Peter",
    regularSeasonMostPoints: "Peter",
  },
  {
    year: 2011,
    champion: "Joey",
    runnerUp: "Lanny",
    thirdPlace: "Tyler",
    regularSeasonChamp: "Lanny",
    otherDivisionChamp: "Joey",
    regularSeasonMostPoints: "Joey",
  },
  {
    year: 2012,
    champion: "Vernon",
    runnerUp: "Lanny",
    thirdPlace: "Matt",
    regularSeasonChamp: "Lanny",
    otherDivisionChamp: "Vernon",
    regularSeasonMostPoints: "Joey",
  },
  {
    year: 2013,
    champion: "Peter",
    runnerUp: "Tyler",
    thirdPlace: "Vernon",
    regularSeasonChamp: "Ben",
    otherDivisionChamp: "Vernon",
    regularSeasonMostPoints: "Tyler",
  },
  {
    year: 2014,
    champion: "Tyler",
    runnerUp: "Joey",
    thirdPlace: "Lanny",
    regularSeasonChamp: "Tyler",
    otherDivisionChamp: "Lanny",
    regularSeasonMostPoints: "Lanny",
  },
  {
    year: 2015,
    champion: "John",
    runnerUp: "Ben",
    thirdPlace: "Ted",
    regularSeasonChamp: "Ted",
    otherDivisionChamp: "Tyler",
    regularSeasonMostPoints: "Ben",
  },
  {
    year: 2016,
    champion: "Lanny",
    runnerUp: "John",
    thirdPlace: "Matt",
    regularSeasonChamp: "John",
    otherDivisionChamp: "Lanny",
    regularSeasonMostPoints: "John",
  },
  {
    year: 2017,
    champion: "Tyler",
    runnerUp: "John",
    thirdPlace: "Matt",
    regularSeasonChamp: "John",
    otherDivisionChamp: "Ben",
    regularSeasonMostPoints: "John",
  },
  {
    year: 2018,
    champion: "Peter",
    runnerUp: "Matt",
    thirdPlace: "Tyler",
    regularSeasonChamp: "Tyler",
    otherDivisionChamp: "Peter",
    regularSeasonMostPoints: "Tyler",
  },
  {
    year: 2019,
    champion: "Joey",
    runnerUp: "Peter",
    thirdPlace: "Ted",
    regularSeasonChamp: "Jason",
    otherDivisionChamp: "Joey",
    regularSeasonMostPoints: "Ted",
  },
  {
    year: 2020,
    champion: "Ted",
    runnerUp: "Ben",
    thirdPlace: "Vernon",
    regularSeasonChamp: "Vernon",
    otherDivisionChamp: "Ben",
    regularSeasonMostPoints: "Ben",
  },
  {
    year: 2021,
    champion: "Peter",
    runnerUp: "Vernon",
    thirdPlace: "John",
    regularSeasonChamp: "Ben",
    otherDivisionChamp: "Vernon",
    regularSeasonMostPoints: "John",
  },
  {
    year: 2022,
    champion: "Vernon",
    runnerUp: "Tyler",
    thirdPlace: "John",
    regularSeasonChamp: "John",
    otherDivisionChamp: "Tyler",
    regularSeasonMostPoints: "John",
  },
  {
    year: 2023,
    champion: "Tyler",
    runnerUp: "Ted",
    thirdPlace: "Matt",
    regularSeasonChamp: "Tyler",
    otherDivisionChamp: "Matt",
    regularSeasonMostPoints: "Joey",
  },
  {
    year: 2024,
    champion: "Matt",
    runnerUp: "Jason",
    thirdPlace: "Peter",
    regularSeasonChamp: "Peter",
    otherDivisionChamp: "Ted",
    regularSeasonMostPoints: "Ted",
  },
  {
    year: 2025,
    champion: "Jason",
    runnerUp: "Tyler",
    thirdPlace: "Matt",
    regularSeasonChamp: "Tyler",
    otherDivisionChamp: "Matt",
    regularSeasonMostPoints: "Tyler",
  },
];

// Helper function to get champions sorted by year (newest first)
export const getChampionshipsByYear = (reverse = true) => {
  return reverse ? [...championships].reverse() : championships;
};

// Get all unique champions
export const getAllChampions = () => {
  const champions = new Set();
  championships.forEach((champ) => {
    if (champ.champion) champions.add(champ.champion);
  });
  return Array.from(champions);
};

// Get championship count for a manager
export const getChampionshipCount = (managerName) => {
  return championships.filter((champ) => champ.champion === managerName).length;
};

// Get all championships for a specific manager
export const getChampionshipsForManager = (managerName) => {
  return championships.filter((champ) => champ.champion === managerName);
};

// Get championship leaderboard (sorted by count, then alphabetically)
export const getChampionshipLeaderboard = () => {
  const counts = {};
  
  championships.forEach((champ) => {
    if (champ.champion) {
      counts[champ.champion] = (counts[champ.champion] || 0) + 1;
    }
  });
  
  return Object.entries(counts)
    .map(([name, count]) => ({ name, count }))
    .sort((a, b) => {
      // Sort by count (descending), then by name (ascending)
      if (b.count !== a.count) {
        return b.count - a.count;
      }
      return a.name.localeCompare(b.name);
    });
};

// Get managers who won back-to-back championships
export const getBackToBackChampions = () => {
  const backToBack = [];
  const sortedChamps = [...championships].sort((a, b) => a.year - b.year);
  
  for (let i = 1; i < sortedChamps.length; i++) {
    const current = sortedChamps[i];
    const previous = sortedChamps[i - 1];
    
    if (current.champion && previous.champion && current.champion === previous.champion) {
      // Check if this is a continuation of an existing streak
      const existing = backToBack.find(b => b.manager === current.champion && b.endYear === previous.year);
      
      if (existing) {
        existing.endYear = current.year;
      } else {
        backToBack.push({
          manager: current.champion,
          startYear: previous.year,
          endYear: current.year,
          count: 2
        });
      }
    }
  }
  
  // Calculate total count for each streak
  backToBack.forEach(streak => {
    streak.count = streak.endYear - streak.startYear + 1;
  });
  
  return backToBack.sort((a, b) => b.count - a.count);
};
